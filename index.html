<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6/49 Lotto Tracker</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom, #c81d25, #006400);
      background-attachment: fixed;
      color: #fff;
      padding: 20px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
    }
    .container { max-width: 1200px; margin: 0 auto; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; font-size: 14px; background: rgba(255,255,255,0.9); color: #222; border-radius: 10px; overflow: hidden; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #006400; color: #fff; }
    tr:nth-child(even) { background: #f9f9f9; }
    .highlight { background: #ffec8b; font-weight: 700; color: #c81d25; }
    h1 { text-align: center; font-size: 2.5em; margin-top: 0; }
    .note { text-align: center; font-size: 1.1em; margin-bottom: 10px; }
    #fireworksCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
    .results { margin-top: 30px; text-align: center; }
    ul { list-style: none; padding: 0; }
    li { background: rgba(255,255,255,0.2); padding: 8px; margin: 5px auto; width: fit-content; border-radius: 6px; }
  </style>
</head>
<body>
  <canvas id="fireworksCanvas"></canvas>
  <div class="container">
    <h1>üéÑ BINGO üéÅ</h1>
    <p class="note"> </p>

    <table id="lottoTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>#1</th>
          <th>#2</th>
          <th>#3</th>
          <th>#4</th>
          <th>#5</th>
          <th>#6</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="results">
      <h2>‚ú® Official 6/49 Draw Results ‚ú®</h2>
      <ul id="resultsList"></ul>
    </div>
  </div>

  <script>
    const players = [
{"name":"JOEL","nums":[5,7,11,22,44,47]},
{"name":"RAUL","nums":[4,9,11,34,38,44]},
{"name":"ARIEL","nums":[15,16,32,34,41,42]},
{"name":"RICHARD","nums":[3,11,18,23,33,42]},
{"name":"WINNIE","nums":[1,4,10,13,24,28]},
{"name":"ROMEL","nums":[6,10,12,22,26,29]},
{"name":"ALDEN","nums":[11,12,17,27,36,41]},
{"name":"TRIPLE 5","nums":[1,6,7,10,12,26]},
{"name":"MARISSA","nums":[5,7,10,25,43,32]},
{"name":"ROSELLA","nums":[9,12,18,32,41,44]},
{"name":"ELVIE","nums":[11,12,15,16,19,26]},
{"name":"SGT MARK","nums":[11,22,33,38,40,43]},
{"name":"TEDDY","nums":[8,10,12,14,24,25]},
{"name":"FAB","nums":[2,10,25,26,29,30]},
{"name":"BAYAW","nums":[6,8,21,28,39,41]},
{"name":"MISIS DEN","nums":[5,7,10,15,25,30]},
{"name":"RITZ","nums":[9,25,26,36,41,47]},
{"name":"CHRIS","nums":[1,2,3,4,5,6]},
{"name":"RODA","nums":[10,18,21,26,37,45]},
{"name":"MARIO MANALAD","nums":[7,16,18,30,36,47]},
{"name":"EDLYNN","nums":[3,7,10,34,43,45]},
{"name":"RONNIE","nums":[4,7,11,22,23,33]},
{"name":"CESAR R.","nums":[3,5,11,13,28,31]},
{"name":"MARIA","nums":[6,11,19,26,38,44]},
{"name":"RAP","nums":[1,6,10,22,23,30]},
{"name":"FRATIMA","nums":[4,14,31,38,41,49]},
{"name":"JINGGOY","nums":[18,25,29,32,37,42]},
{"name":"PAUL","nums":[8,15,21,24,30,36]},
{"name":"PHEBIE","nums":[10,15,24,28,29,44]},
{"name":"CHESTER","nums":[5,15,18,19,24,32]},
{"name":"YANANG","nums":[3,19,25,37,42,48]},
{"name":"JOANA","nums":[7,13,22,26,28,36]},
{"name":"CRIS O.","nums":[7,9,15,19,24,26]},
{"name":"JULIAN","nums":[2,6,11,13,29,30]},
{"name":"JEFF R.","nums":[6,9,11,17,27,45]},
{"name":"GIRLIE","nums":[16,18,41,43,45,46]},
{"name":"MARIO MAPILE","nums":[1,8,20,24,30,34]},
{"name":"BRENDA","nums":[9,11,16,19,36,44]},
{"name":"BRENDA","nums":[6,8,13,14,21,29]},
{"name":"BONG FON","nums":[10,17,25,35,45,49]},
{"name":"AYIE","nums":[11,16,22,27,29,38]},
{"name":"OLIVE","nums":[8,12,19,21,26,31]},
{"name":"KING","nums":[4,9,17,18,23,25]},
{"name":"KAT","nums":[8,13,19,24,34,42]},
{"name":"AMOR","nums":[8,15,22,25,43,49]},
{"name":"MARCHE","nums":[8,13,16,28,32,44]},
{"name":"MARK RICHARD","nums":[1,7,17,21,27,43]},
{"name":"PHEB","nums":[7,18,21,24,33,47]},
{"name":"MARK","nums":[8,10,15,25,35,48]},
{"name":"ISON","nums":[2,7,14,22,27,30]},
{"name":"VINOTHA","nums":[7,9,11,25,37,43]},
{"name":"HANS","nums":[4,9,11,17,24,30]},
{"name":"DEN","nums":[3,5,6,10,15,23]},
{"name":"SARGE 1","nums":[2,10,14,17,26,38]},
{"name":"SARGE 2","nums":[9,23,25,38,39,45]},
{"name":"VAL","nums":[2,13,23,27,36,42]},
{"name":"GG","nums":[8,11,20,28,30,49]},
{"name":"RHEBZ","nums":[2,4,21,23,25,29]},
{"name":"RENZ","nums":[4,12,15,19,38,40]},
{"name":"JEN","nums":[5,28,19,24,25,46]},
{"name":"RICHARD","nums":[4,9,10,17,40,43]}
    ];

    let drawResults = [];
    const tbody = document.querySelector('#lottoTable tbody');
    const resultsList = document.getElementById('resultsList');

async function fetchMagayoResults() {
  try {
    const res = await fetch(
      "https://r.jina.ai/http://www.lotto-8.com/canada/listltoCA649.asp",
      { cache: "no-store" }
    );
    const text = await res.text();

    // Split into lines and pair date lines with the next numbers line.
    const lines = text.split(/\r?\n/);

    const dateLineRe = /^\s*(\d{2})\/(\d{2})\s*$/; // e.g., "05/11"
    const numsLineRe = /^\s*25\([A-Z]{3}\)(\d{1,2}(?:,\d{1,2}){5})\s+\d{1,2}\s*$/; // "25(WED)05,16,17,30,35,46 06"

    const resultsByDate = new Map();
    const START = new Date("2025-11-05T00:00:00");
    const monthNames = [
      null,"January","February","March","April","May","June",
      "July","August","September","October","November","December"
    ];

    for (let i = 0; i < lines.length; i++) {
      const m = lines[i].match(dateLineRe);
      if (!m) continue;

      const dd = parseInt(m[1], 10);
      const mm = parseInt(m[2], 10);

      // find next non-empty line for the numbers
      let j = i + 1;
      while (j < lines.length && lines[j].trim() === "") j++;

      if (j >= lines.length) continue;
      const n = lines[j].match(numsLineRe);
      if (!n) continue;

      const dateObj = new Date(2025, mm - 1, dd); // DD/MM/25 ‚Üí 2025-mm-dd
      if (isNaN(+dateObj) || dateObj < START) continue;

      const nums = n[1].split(",").map(x => parseInt(x.trim(), 10));
      if (nums.length !== 6 || nums.some(Number.isNaN)) continue;

      const dateStr = `${dd} ${monthNames[mm]} 2025`;
      resultsByDate.set(dateStr, nums);
    }

    // newest first
    drawResults = Array.from(resultsByDate.entries())
      .map(([date, nums]) => ({ date, nums }))
      .sort((a, b) => new Date(b.date) - new Date(a.date));

    updateResultsList();
    updateTable();
  } catch (err) {
    console.error("Error fetching results:", err);
    const li = document.createElement("li");
    li.textContent = "Unable to fetch results automatically.";
    resultsList.appendChild(li);
  }
}

    function updateTable() {
      tbody.innerHTML = '';
      players.forEach(player => {
        const tr = document.createElement('tr');
        const nameTd = document.createElement('td');
        nameTd.textContent = player.name;
        tr.appendChild(nameTd);

        player.nums.forEach(num => {
          const td = document.createElement('td');
          td.textContent = num;
          if (drawResults.some(r => r.nums.includes(num))) td.classList.add('highlight');
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }

    function updateResultsList() {
      resultsList.innerHTML = '';
      drawResults.forEach(r => {
        const li = document.createElement('li');
        li.textContent = `${r.date}: ${r.nums.join(', ')}`;
        resultsList.appendChild(li);
      });
    }

    const canvas = document.getElementById('fireworksCanvas');
    const ctx = canvas.getContext('2d');
    let fireworks = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Firework {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height;
        this.targetY = Math.random() * canvas.height / 2;
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
        this.speed = 2 + Math.random() * 3;
      }
      update() {
        this.y -= this.speed;
        if (this.y < this.targetY) this.explode();
      }
      explode() {
        for (let i = 0; i < 30; i++) fireworks.push(new Particle(this.x, this.y, this.color));
        this.dead = true;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
    }

    class Particle {
      constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.speedX = (Math.random() - 0.5) * 6;
        this.speedY = (Math.random() - 0.5) * 6;
        this.life = 100;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        this.life--;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
    }

    function animateFireworks() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (Math.random() < 0.05) fireworks.push(new Firework());
      fireworks.forEach((f, i) => {
        f.update(); f.draw();
        if (f.dead) fireworks.splice(i, 1);
      });
      requestAnimationFrame(animateFireworks);
    }

    animateFireworks();
    fetchMagayoResults();
  </script>
</body>
</html>
